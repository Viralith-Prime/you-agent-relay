<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>You.com Multi-Agent Relay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .agent-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
        }
        .agent-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        .agent-type {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .type-custom {
            background: #e3f2fd;
            color: #1976d2;
        }
        .type-premade {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        .url-display {
            font-family: monospace;
            font-size: 11px;
            color: #666;
            margin-top: 10px;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
            overflow-x: auto;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            max-width: 100%;
        }
        .url-display:focus,
        .url-display:hover {
            white-space: normal;
            overflow-x: auto;
            text-overflow: initial;
            background: #e3e3e3;
        }
        .prompt-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .prompt-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            resize: vertical;
        }
        .prompt-textarea:focus {
            outline: none;
            border-color: #1976d2;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: #1976d2;
            color: white;
        }
        .btn-primary:hover {
            background: #1565c0;
        }
        .btn-secondary {
            background: #e0e0e0;
            color: #424242;
        }
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        .launch-btn {
            width: 100%;
            margin-top: 15px;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        @media (max-width: 600px) {
            .url-display {
                font-size: 9px;
                padding: 4px;
            }
            .prompt-section {
                padding: 10px;
            }
        }
    </style>
</head>
<!-- Cloudflare Web Analytics -->
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "3aebc7040ae5458e90aa4e6059bc20af"}'></script>
<!-- End Cloudflare Web Analytics -->
<body>
    <h1>üöÄ You.com Multi-Agent Relay Dashboard</h1>
    
    <div class="prompt-section">
        <h2>üìù Universal Prompt Relay</h2>
        <label for="universal-prompt" class="visually-hidden">Universal Prompt</label>
        <textarea 
            id="universal-prompt"
            class="prompt-textarea"
            placeholder="Enter your prompt here. It will be available for copy/paste when you launch any agent..."
            aria-label="Universal prompt to relay to agents"
        ></textarea>
        
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="savePrompt()" aria-label="Save prompt">
                üíæ Save Prompt
            </button>
            <button class="btn btn-secondary" onclick="copyPrompt()" aria-label="Copy prompt to clipboard">
                üìã Copy to Clipboard
            </button>
            <button class="btn btn-secondary" onclick="clearPrompt()" aria-label="Clear prompt">
                üóëÔ∏è Clear
            </button>
        </div>
        
        <div id="saved-indicator" style="margin-top: 10px; color: #4caf50; display: none;">
            ‚úì Prompt saved locally
        </div>
    </div>
    
    <h2 style="margin-top: 40px;">ü§ñ Agent Directory</h2>
    <div id="agent-grid" class="agent-grid" aria-live="polite">
        <!-- Agent cards will be inserted here -->
    </div>

    <script>
        // Agent configuration with correct URLs
        const myAgents = [
            // Custom agents
            {
                name: "Research Assistant",
                url: "https://you.com/agents/user_mode_38977fec-fd18-4446-8494-9bdfab5727d1?chatMode=user_mode_38977fec-fd18-4446-8494-9bdfab5727d1",
                type: "custom",
                icon: "üî¨",
                description: "Academic research and citation helper"
            },
            {
                name: "Code Helper",
                url: "https://you.com/agents/user_mode_2ab61571-8ae6-4316-af42-42f6b1f135e8?chatMode=user_mode_2ab61571-8ae6-4316-af42-42f6b1f135e8",
                type: "custom",
                icon: "üíª",
                description: "Programming assistant and debugger"
            },
            {
                name: "Writing Coach",
                url: "https://you.com/agents/user_mode_88c342e3-fa3a-457a-bad3-bcd3a56395c2?chatMode=user_mode_88c342e3-fa3a-457a-bad3-bcd3a56395c2",
                type: "custom",
                icon: "‚úçÔ∏è",
                description: "Creative writing and editing support"
            },
            // Premade agents
            {
                name: "Smart Routing",
                url: "https://you.com/agents/smart_routing?chatMode=smart_routing",
                type: "premade",
                icon: "üß†",
                description: "Intelligent query routing"
            },
            {
                name: "Research Mode",
                url: "https://you.com/agents/research?chatMode=research",
                type: "premade",
                icon: "üìö",
                description: "Deep research with citations"
            },
            {
                name: "GPT-4o",
                url: "https://you.com/agents/gpt_4o?chatMode=custom",
                type: "premade",
                icon: "ü§ñ",
                description: "Advanced GPT-4 model"
            }
        ];

        // Initialize dashboard
        function initDashboard() {
            const grid = document.getElementById('agent-grid');
            grid.innerHTML = '';
            myAgents.forEach((agent, index) => {
                const card = document.createElement('div');
                card.className = 'agent-card';
                card.innerHTML = `
                    <span class="agent-type type-${agent.type}">${agent.type.toUpperCase()}</span>
                    <h3 style="font-size: 24px; margin: 0 0 10px 0;">
                        ${agent.icon} ${agent.name}
                    </h3>
                    <p style="color: #666; margin: 10px 0;">
                        ${agent.description}
                    </p>
                    <div class="url-display" tabindex="0" aria-label="Agent URL (focus to expand)">
                        ${agent.url}
                    </div>
                    <button class="btn btn-primary launch-btn" onclick="launchAgent(${index})" aria-label="Launch ${agent.name}">
                        üöÄ Launch Agent
                    </button>
                `;
                grid.appendChild(card);
            });
            
            // Load saved prompt
            const savedPrompt = localStorage.getItem('relay-prompt');
            if (savedPrompt) {
                document.getElementById('universal-prompt').value = savedPrompt;
                document.getElementById('saved-indicator').style.display = 'block';
            } else {
                document.getElementById('saved-indicator').style.display = 'none';
            }
        }

        // Save prompt to localStorage
        function savePrompt() {
            const prompt = document.getElementById('universal-prompt').value;
            localStorage.setItem('relay-prompt', prompt);
            localStorage.setItem('relay-timestamp', Date.now());
            document.getElementById('saved-indicator').style.display = prompt ? 'block' : 'none';
            showNotification('‚úì Prompt saved! Ready for relay to agents.');
        }

        // Copy prompt to clipboard (with fallback)
        function copyPrompt() {
            const prompt = document.getElementById('universal-prompt').value;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(prompt).then(() => {
                    showNotification('üìã Copied! Paste in the You.com agent chat.');
                }).catch(() => {
                    fallbackCopyTextToClipboard(prompt);
                });
            } else {
                fallbackCopyTextToClipboard(prompt);
            }
        }
        // Fallback copy function
        function fallbackCopyTextToClipboard(text) {
            const textarea = document.createElement("textarea");
            textarea.value = text;
            textarea.style.position = "fixed";
            textarea.style.left = "-9999px";
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            try {
                document.execCommand('copy');
                showNotification('üìã Copied! Paste in the You.com agent chat.');
            } catch (err) {
                showNotification('‚ùå Copy failed. Please copy manually.');
            }
            document.body.removeChild(textarea);
        }

        // Clear prompt
        function clearPrompt() {
            document.getElementById('universal-prompt').value = '';
            localStorage.removeItem('relay-prompt');
            document.getElementById('saved-indicator').style.display = 'none';
        }

        // Launch agent in new tab
        function launchAgent(index) {
            const agent = myAgents[index];
            const prompt = document.getElementById('universal-prompt').value;
            // Save current state
            if (prompt) {
                savePrompt();
            }
            // Store launch metadata
            localStorage.setItem('last-launched-agent', JSON.stringify({
                name: agent.name,
                url: agent.url,
                timestamp: Date.now()
            }));
            // Open agent
            window.open(agent.url, '_blank', 'noopener');
            // Show instructions
            if (prompt) {
                showNotification(`
                    ${agent.name} opened! 
                    Click "Copy to Clipboard" then paste in You.com.
                `, 5000);
            } else {
                showNotification(`${agent.name} opened in new tab!`);
            }
        }

        // Notification system (proper exit animation)
        function showNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s forwards';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', initDashboard);
    </script>
    <style>
    /* Visually hidden utility for accessibility */
    .visually-hidden {
        position: absolute !important;
        height: 1px; width: 1px;
        overflow: hidden;
        clip: rect(1px, 1px, 1px, 1px);
        white-space: nowrap;
    }
    </style>
</body>
</html>
